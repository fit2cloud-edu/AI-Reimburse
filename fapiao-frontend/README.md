# å‘ç¥¨æŠ¥é”€å‰ç«¯ç³»ç»Ÿ (Fapiao Frontend)

ä¸€ä¸ªåŸºäº Vue 3 + TypeScript + Element Plus çš„ç°ä»£åŒ–å‘ç¥¨æŠ¥é”€å‰ç«¯åº”ç”¨ï¼Œæ”¯æŒä¼ä¸šå¾®ä¿¡é›†æˆå’Œæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ã€‚

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Vue 3.5.25 + TypeScript
- **æ„å»ºå·¥å…·**: Vite 7.2.4
- **UIç»„ä»¶åº“**: Element Plus 2.12.0
- **çŠ¶æ€ç®¡ç†**: Pinia 3.0.4
- **è·¯ç”±ç®¡ç†**: Vue Router 4.6.4
- **HTTPå®¢æˆ·ç«¯**: Axios 1.13.2
- **æ ·å¼é¢„å¤„ç†å™¨**: Sass 1.96.0
- **ä»£ç è§„èŒƒ**: ESLint + Prettier
- **æµ‹è¯•æ¡†æ¶**: Vitest + Playwright

## é¡¹ç›®ç»“æ„
src/ 
 â”œâ”€â”€ api/ # APIæ¥å£å®šä¹‰
 â”‚ â”œâ”€â”€ auth.ts # è®¤è¯ç›¸å…³æ¥å£ 
 â”‚ â”œâ”€â”€ department.ts # éƒ¨é—¨ç›¸å…³æ¥å£ 
 â”‚ â”œâ”€â”€ reimbursement.ts # æŠ¥é”€ç›¸å…³æ¥å£ 
 â”‚ â”œâ”€â”€ upload.ts # æ–‡ä»¶ä¸Šä¼ æ¥å£ 
 â”‚ â””â”€â”€ types.ts # TypeScriptç±»å‹å®šä¹‰ 
 â”œâ”€â”€ assets/ # é™æ€èµ„æº 
 â”‚ â””â”€â”€ main.css # å…¨å±€æ ·å¼ 
 â”œâ”€â”€ components/ # å…¬å…±ç»„ä»¶ 
 â”‚ â”œâ”€â”€ FileUploader.vue # æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ 
 â”‚ â”œâ”€â”€ FlowSteps.vue # æµç¨‹æ­¥éª¤ç»„ä»¶ 
 â”‚ â”œâ”€â”€ InvoiceCard.vue # å‘ç¥¨å¡ç‰‡ç»„ä»¶ 
 â”‚ â”œâ”€â”€ ProgressModal.vue # è¿›åº¦å¼¹çª—ç»„ä»¶ 
 â”‚ â””â”€â”€ ValidationMarker.vue # éªŒè¯æ ‡è®°ç»„ä»¶ 
 â”œâ”€â”€ config/ # é…ç½®æ–‡ä»¶ 
 â”‚ â””â”€â”€ company.ts # ä¼ä¸šé…ç½®ä¿¡æ¯ 
 â”œâ”€â”€ router/ # è·¯ç”±é…ç½® 
 â”‚ â””â”€â”€ index.ts # è·¯ç”±å®šä¹‰ 
 â”œâ”€â”€ store/ # çŠ¶æ€ç®¡ç† 
 â”‚ â”œâ”€â”€ auth.ts # è®¤è¯çŠ¶æ€ç®¡ç† 
 â”‚ â”œâ”€â”€ reimbursement.ts # æŠ¥é”€çŠ¶æ€ç®¡ç† 
 â”‚ â””â”€â”€ index.ts # Storeå…¥å£ 
 â”œâ”€â”€ utils/ # å·¥å…·å‡½æ•° 
 â”‚ â”œâ”€â”€ fileUtils.ts # æ–‡ä»¶å¤„ç†å·¥å…· 
 â”‚ â”œâ”€â”€ request.ts # HTTPè¯·æ±‚å°è£… 
 â”‚ â”œâ”€â”€ validators.ts # è¡¨å•éªŒè¯å·¥å…· 
 â”‚ â””â”€â”€ wxCompat.ts # å¾®ä¿¡å…¼å®¹å·¥å…· 
 â”œâ”€â”€ views/ # é¡µé¢ç»„ä»¶ 
 â”‚ â”œâ”€â”€ Login.vue # ç™»å½•é¡µé¢ 
 â”‚ â””â”€â”€ Reimbursement.vue # æŠ¥é”€é¡µé¢ 
 â”œâ”€â”€ App.vue # æ ¹ç»„ä»¶ 
 â””â”€â”€ main.ts # åº”ç”¨å…¥å£


## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… ä¼ä¸šå¾®ä¿¡æ‰«ç ç™»å½•
- âœ… å‘ç¥¨ä¿¡æ¯å½•å…¥ä¸éªŒè¯
- âœ… å¤šæ–‡ä»¶ä¸Šä¼ æ”¯æŒ
- âœ… éƒ¨é—¨ä¿¡æ¯ç®¡ç†
- âœ… å®æ—¶è¡¨å•éªŒè¯

### æŠ€æœ¯ç‰¹æ€§
- ğŸ”¥ åŸºäºVue 3 Composition API
- ğŸ“± å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯æ‰“å¼€
- ğŸ¨ Element Plus UIç»„ä»¶åº“
- ğŸ”’ TypeScriptç±»å‹å®‰å…¨
- ğŸš€ Viteå¿«é€Ÿæ„å»º

## ç¯å¢ƒè¦æ±‚

- Node.js: ^20.19.0 || >=22.12.0
- npm: 9.x æˆ–æ›´é«˜ç‰ˆæœ¬

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
npm install
```

### 2. ç¯å¢ƒé…ç½®
å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶å¹¶è®¾ç½®ç›¸åº”å‚æ•°ï¼š

```bash
# å¼€å‘ç¯å¢ƒ
cp .env.development .env.local

# ç”Ÿäº§ç¯å¢ƒ  
cp .env.production .env.local
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```
åº”ç”¨å°†åœ¨ http://localhost:3000 å¯åŠ¨

### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
```

### 5. é¢„è§ˆç”Ÿäº§æ„å»º
```bash
npm run preview
```

## å¼€å‘è„šæœ¬

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# ç±»å‹æ£€æŸ¥
npm run type-check

# ä»£ç æ ¼å¼åŒ–
npm run format

# ä»£ç æ£€æŸ¥ä¸ä¿®å¤
npm run lint

# å•å…ƒæµ‹è¯•
npm run test:unit

# E2Eæµ‹è¯•
npm run test:e2e
```

## é…ç½®è¯´æ˜

### Viteé…ç½®
é¡¹ç›®ä½¿ç”¨Viteä½œä¸ºæ„å»ºå·¥å…·ï¼Œä¸»è¦é…ç½®åŒ…æ‹¬ï¼š
- è·¯å¾„åˆ«åï¼š`@` æŒ‡å‘ `src` ç›®å½•
- å¼€å‘æœåŠ¡å™¨ä»£ç†ï¼šå°† `/api` è¯·æ±‚ä»£ç†åˆ°åç«¯æœåŠ¡
- è‡ªåŠ¨å¯¼å…¥ï¼šElement Plusç»„ä»¶è‡ªåŠ¨å¯¼å…¥

### ä¼ä¸šé…ç½®
ä¼ä¸šç›¸å…³é…ç½®ä½äº `src/config/company.ts`ï¼ŒåŒ…æ‹¬ï¼š
- ä¼ä¸šIDé…ç½®
- åº”ç”¨é…ç½®ä¿¡æ¯
- APIåŸºç¡€è·¯å¾„

### APIé…ç½®
APIè¯·æ±‚é…ç½®ä½äº `src/utils/request.ts`ï¼ŒåŒ…å«ï¼š
- è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆæ·»åŠ è®¤è¯tokenï¼‰
- å“åº”æ‹¦æˆªå™¨ï¼ˆç»Ÿä¸€é”™è¯¯å¤„ç†ï¼‰
- è¶…æ—¶é…ç½®

## éƒ¨ç½²è¯´æ˜

### å¼€å‘ç¯å¢ƒéƒ¨ç½²
1. é…ç½®å¼€å‘ç¯å¢ƒå˜é‡
2. è¿è¡Œ `npm run build`
3. å°† `dist` ç›®å½•éƒ¨ç½²åˆ°WebæœåŠ¡å™¨

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
1. é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
2. è¿è¡Œ `npm run build`
3. é…ç½®Nginxåå‘ä»£ç†
4. éƒ¨ç½²åˆ°CDNæˆ–é™æ€æ–‡ä»¶æœåŠ¡å™¨

### Nginxé…ç½®ç¤ºä¾‹
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        root /path/to/dist;
        index index.html;
        try_files $uri $uri/ /index.html;
    }
    
    location /api {
        proxy_pass https://try2-edu.fit2cloud.cn;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢
1. åœ¨ `src/views` ç›®å½•ä¸‹åˆ›å»ºVueç»„ä»¶
2. åœ¨ `src/router/index.ts` ä¸­æ·»åŠ è·¯ç”±é…ç½®
3. å¦‚éœ€APIè°ƒç”¨ï¼Œåœ¨ `src/api` ç›®å½•ä¸‹æ·»åŠ æ¥å£å®šä¹‰

### æ·»åŠ æ–°ç»„ä»¶
1. åœ¨ `src/components` ç›®å½•ä¸‹åˆ›å»ºVueç»„ä»¶
2. ç»„ä»¶æ”¯æŒè‡ªåŠ¨å¯¼å…¥ï¼Œæ— éœ€æ‰‹åŠ¨å¼•å…¥

### APIå¼€å‘è§„èŒƒ
- æ‰€æœ‰APIè¯·æ±‚ä½¿ç”¨ `src/utils/request.ts` å°è£…çš„axioså®ä¾‹
- æ¥å£å®šä¹‰ç»Ÿä¸€æ”¾åœ¨ `src/api` ç›®å½•
- TypeScriptç±»å‹å®šä¹‰æ”¾åœ¨ `src/api/types.ts`

### çŠ¶æ€ç®¡ç†
- ä½¿ç”¨Piniaè¿›è¡ŒçŠ¶æ€ç®¡ç†
- Storeæ¨¡å—åŒ–ç»„ç»‡ï¼ŒæŒ‰åŠŸèƒ½åˆ’åˆ†
- çŠ¶æ€å˜æ›´é€šè¿‡actionsè¿›è¡Œ

## æµ‹è¯•

### å•å…ƒæµ‹è¯•
```bash
npm run test:unit
```

### E2Eæµ‹è¯•
```bash
npm run test:e2e
```

## å¸¸è§é—®é¢˜

### Q: å¼€å‘æ—¶å¦‚ä½•é…ç½®ä»£ç†ï¼Ÿ
A: åœ¨ `vite.config.ts` çš„ `server.proxy` ä¸­é…ç½®åç«¯APIåœ°å€ã€‚

### Q: å¦‚ä½•æ·»åŠ æ–°çš„Element Plusç»„ä»¶ï¼Ÿ
A: é¡¹ç›®å·²é…ç½®è‡ªåŠ¨å¯¼å…¥ï¼Œç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å³å¯ã€‚

### Q: å¦‚ä½•ä¿®æ”¹ä¼ä¸šé…ç½®ï¼Ÿ
A: ä¿®æ”¹ `src/config/company.ts` ä¸­çš„é…ç½®é¡¹ã€‚

### Q: æ–‡ä»¶ä¸Šä¼ å¤§å°é™åˆ¶å¦‚ä½•è°ƒæ•´ï¼Ÿ
A: åœ¨ `src/components/FileUploader.vue` ä¸­ä¿®æ”¹æ–‡ä»¶å¤§å°é™åˆ¶é…ç½®ã€‚